<!DOCTYPE html>
<html lang="en">

<head>
	<title>HTML puppeteer</title>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<script src="libraries/jquery-3.6.0.js"></script>
	<script src="libraries/handlebars.min-v4.7.7.js"></script>
	<!-- see https://github.com/lodash/lodash/wiki/FP-Guide#installation -->
	<script src="libraries/lodash4_lodash.min.js_lodash.fp.min.js"></script>
	<link href="ro/go/adrhc/app/css/main.css" rel="stylesheet">
	<link href="ro/go/adrhc/app/css/responstable.css" rel="stylesheet">
</head>

<body>
<script>const fp = _.noConflict()</script>
<script src="10div-list-default-seat.js" type="module"></script>

<div class="container scenario12">
	<div class="section title">SimpleContainerComponent</div>
	<div class="section flex-center fill-available buttons">
		<button name="create">Create a child (on top)</button>
		<button name="remove">Remove oldest child</button>
	</div>
	<!-- debuggers -->
	<div class="section title">debuggers</div>
	<div class="section flex-center fill-available buttons">
		<div>
			<button name="change-parent-state">Change parent state</button>
			<button name="change-partial-state">Change partial state (aka guests)</button>
		</div>
	</div>
	<div class="section">
		<div class="flex-center">
			<textarea class="fill-available" id="parent-state-and-debugger"
			          rows="10">No debugging data available yet!</textarea>
			<textarea class="fill-available" id="partial-state" rows="10">Write here some partial (aka child/slice) state, e.g.:
{"kidX": {"id": "X", "name": "kid X"}, "kidY": {"id": "Y", "name": "kid Y"}}
PS: make sure to have a well formatted JSON!</textarea>
		</div>
	</div>
	<!-- the component -->
	<div class="section title">Component's view (parent and its guests)</div>
	<!--
		message1: its parent state is null hence it'll initialize from data-initial-state attribute
		message2: its parent state is not null hence it'll use it despite the fact that it has data-initial-state attribute
		message3: its parent state is missing so its component is not created
	-->
	<div class="section flex-column fit-content bgc-aliceblue"
	     data-family-names="booth"
	     data-initial-state='{"kid0": {"id": 0, "name": "kid 0"},
	     "booth": {"message1": null, "message2": "the state for \"message2\" is provided by the parent"},
	     "text": "this is the parent state displayed by its view"}'
	     data-seat-occupant-html-tag="tr"
	     data-seat-occupant-template-id="kid-template"
	     data-standing-names="text"
	     data-template-id="parent-template"
	     data-type="simple-container"
	     id="parent-component">
	</div>
</div>

<script id="parent-template" type="text/x-handlebars-template">
	<!-- parent own view -->
	<div class="parent">{{text}}</div>
	<!-- child container component -->
	<div data-part="booth" data-type="simple-container" class="flex-column fill-available"
	     data-template-id="booth-template" data-no-guests="true"></div>
	<div>kids could be on parent's top or left or anywhere else</div>
	<!-- guests -->
	<table class="responstable" data-guests>
		<thead>
		<tr>
			<th>Id</th>
			<th>Name</th>
		</tr>
		</thead>
	</table>
</script>

<script id="booth-template" type="text/x-handlebars-template">
	<div class="mb3 title">this is a child container component</div>
	{{#with value}}
		<div data-part="message1" data-type="simple" data-owner="{{@root.owner}}"
		     data-template-id="message1-template"
		     data-initial-state='The "message1" child state is from <i>data-initial-state</i> attribute.'
		     data-view-removal-strategy="USE_HTML"
		     data-removed-placeholder='"message1" child component was removed!'>
			The "message1" child has no <i>data-initial-state</i> and its parent part is missing!
		</div>
		<div data-part="message2" data-type="simple" data-owner="{{@root.owner}}"
		     data-template-id="message2-template"
		     data-initial-state='This "message2" initial state should NOT be visible!<BR>initial state should come from the parent'>
			The "message2" child has no <i>data-initial-state</i> and its parent part is missing!
		</div>
		<div data-part="message3" data-type="simple" data-owner="{{@root.owner}}"
		     data-template-id="message3-template"
		     data-initial-state='This "message3" initial state should NOT be visible!<BR>initial state should come from the parent'>
			The "message3" child has no <i>data-initial-state</i> and its parent part is missing!
		</div>
	{{/with}}
</script>

<script id="message1-template" type="text/x-handlebars-template">
	{{#if this}}{{{value}}}{{else}}The "message1" child is not available yet!{{/if}}
</script>

<script id="message2-template" type="text/x-handlebars-template">
	{{#if this}}{{{value}}}{{else}}The "message2" child is not available yet!{{/if}}
</script>

<script id="message3-template" type="text/x-handlebars-template">
	{{#if this}}{{{value}}}{{else}}The "message3" child is not available yet!{{/if}}
</script>

<script id="kid-template" type="text/x-handlebars-template">
	{{#with value}}
		<td>{{id}}</td>
		<td>{{name}}</td>
	{{/with}}
</script>

</body>

</html>
